<h1>Jeu maux de passe</h1>
<div class="game-container" cdkDropListGroup>
    <div id="zone-cartes-mdp" class="zone" cdkDropList cdkDropListOrientation="mixed" [cdkDropListData]="cartes"
        (cdkDropListDropped)="drop($event)">
        <h2>Cartes mot de passe</h2>
        @for (carte of cartes; track carte) {
        <app-cartemdp [texte]="carte" cdkDrag></app-cartemdp>
        }
    </div>
    <div id="zone-zones-duree">
        <h2>Zones de dur√©es</h2>
        @for (zone of zones; track zone.label) {
        <div class="drop-zone-slot" cdkDropList [cdkDropListData]="zone.items" (cdkDropListDropped)="drop($event)">
            <app-zoneduree [duree]="zone.label"></app-zoneduree>
            @for (item of zone.items; track item) {
            <app-cartemdp [texte]="item" cdkDrag></app-cartemdp>
            }
        </div>
        }
    </div>
</div>
<button (click)="btnValider()" id="btn-jeu-mdp">VALIDER</button>

@if (currentPopup !== 'NONE') {
<div class="popup-overlay">
    <div class="popup-content" [ngClass]="{'victory': currentPopup === 'VICTORY'}">

        <!-- RULES -->
        @if (currentPopup === 'RULES') {
        <h2>R√®gles du jeu</h2>
        <p>Bienvenue dans le jeu maux de passe !</p>
        <p>Votre objectif est d'associer chaque mot de passe √† sa dur√©e de craquage estim√©e.</p>
        <p>Glissez les cartes de gauche vers les zones correspondantes √† droite.</p>
        <button (click)="closePopup()" class="btn-popup">Commencer</button>
        }

        <!-- INCOMPLETE -->
        @if (currentPopup === 'INCOMPLETE') {
        <h2>Placement incomplet</h2>
        <p>Vous n'avez pas plac√© toutes les cartes.</p>
        <p>Veuillez associer chaque mot de passe √† une dur√©e avant de valider.</p>
        <button (click)="closePopup()" class="btn-popup">Continuer</button>
        }

        <!-- VICTORY -->
        @if (currentPopup === 'VICTORY') {
        <div class="victory-icon">üéâ</div>
        <h2>F√©licitations !</h2>
        <p>Vous avez correctement class√© tous les mots de passe !</p>
        <p>Vous connaissez maintenant les ordres de grandeur de la s√©curit√© des mots de passe.</p>
        <div class="popup-actions">
            <button (click)="resetGame()" class="btn-popup">Nouvelle partie</button>
            <button (click)="goToTools()" class="btn-popup secondary">Bo√Æte √† outils</button>
        </div>
        }

        <!-- DEFEAT -->
        @if (currentPopup === 'DEFEAT') {
        <h2>Dommage...</h2>
        <p>Il y a des erreurs dans votre classement.</p>
        <p>Ne vous d√©couragez pas, essayez encore !</p>
        <div class="popup-actions hidden-on-mobile"> <!-- Stack buttons vertically -->
            <button (click)="closePopup()" class="btn-popup">Continuer la partie</button>
            <button (click)="resetGame()" class="btn-popup destroy">Nouvelle partie</button>
        </div>
        }

    </div>
</div>
}